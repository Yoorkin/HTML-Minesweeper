<!DOCTYPE html>
<html>
    <div id="space">

    </div>
</html>

<script>

    var number=[];
    var size=0;
    load(10,10,10);
    function load(columns,rows,bombs){
        size=columns;
        var space = document.getElementById('space');
        space.innerHTML="";
        for(var y=0;y<rows;y++){
            var line="<div class='blockLine'>"
            for(var x=0;x<columns;x++){
                number.push(0);
                line+="<div class='block' id='block"+y+"_"+x+"' onclick='blockOnClick("+y+","+x+")'></div>"
            }
            line+="</div>";
            space.innerHTML+=line;
        }

        for(var i=0;i<bombs;i++){
            number[Math.floor(Math.random()*number.length)-1]=-2;
        }
    }

    function blockOnClick(row,column){
        setBlockClicked(row,column);
    }

    function isBombs(y,x){
        return y>=0&&y<size&&x>=0&&x<size&&number[y*size+x]<0;
    }

    function getBombs(y,x){
        var count=0;
        if(isBombs(y,x-1))count++;
        if(isBombs(y,x+1))count++;

        if(isBombs(y+1,x-1))count++;
        if(isBombs(y+1,x))count++;
        if(isBombs(y+1,x+1))count++;

        if(isBombs(y-1,x-1))count++;
        if(isBombs(y-1,x))count++;
        if(isBombs(y-1,x+1))count++;
        return count;
    }

    function setBlockClicked(row,column){
        if(row<0 || row>=size || column<0 || column>=size ||number[row*size+column]==1 || number[row*size+column]==-1)return;
        number[row*size+column]+=1;
        var block = document.getElementById('block'+row+'_'+column);
        if(isBombs(row,column)){
            block.setAttribute('class','bomb');
            
            return;
        }
        var count = getBombs(row,column);
        block.setAttribute('class','blockClicked');
        if(count!=0){
            block.innerHTML="<p class='blockText'>"+count+"</p>";            
        }
        else{
            setBlockClicked(row+1,column);
            setBlockClicked(row-1,column);
            setBlockClicked(row,column+1);
            setBlockClicked(row,column-1);
        }
    }

    

</script>

<style>
    .block{
    width:30px;
    height:30px;
    background-color: rgb(214, 214, 214);
    border:1px solid rgb(133, 132, 132);
    margin:2px;
    transition: all 200ms;
    padding:10px;
}

.blockClicked{
    width:30px;
    height:30px;
    background-color: rgb(255, 255, 255);
    border:1px solid rgb(133, 132, 132);
    margin:2px;
    transition: all 200ms;
    padding:10px;
}
.bomb{
    width:30px;
    height:30px;
    background-color: rgb(180, 12, 12);
    border:1px solid rgb(133, 132, 132);
    margin:2px;
    transition: all 200ms;
    padding:10px;
}

.block:hover{
    transform: scale(1.2);
    box-shadow: 0px 0px 10px gray;
}

.block:active{
    transform: scale(1.1);
    box-shadow: 0px 0px 5px gray;
}

.blockText{
    width:100%;
    height:100%;
    margin:0px;
    text-align: center;
    font-size: 20px;
    user-select: none;
}

.blockLine{
    height:54px;
    margin:1px;
    display: flex;
}
</style>